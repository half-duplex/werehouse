{% function block.content() %}{% render("components/group_box", { groups =
groups }) %}
<div class="sidebar-grid">
  <div class="main-image">
    <input id="fit-to-screen" type="checkbox" />
    <label for="fit-to-screen"> Fit to screen</label>
    <img src="/image-file/{%& image.file %}" />
  </div>
  <div class="sidebar">
    <a class="edit" href="/image/{%& image.image_id %}/edit">Edit</a>
    <h1>Metadata</h1>
    <ul>
      <li>Saved at: <time>{%& image.saved_at %}</time></li>
      <li>Categories: {%& fn.category_str(image.category) %}</li>
      <li>Rating: {%& fn.rating_str(image.rating) %}</li>
      <li>Kind: {%& fn.kind_str(image.kind) %}</li>
    </ul>
    <h1>Artists</h1>
    {% if #artists == 0 then %}
    <p>No artists recorded for this image yet.</p>
    {% else %}
    <ul>
      {% for _, artist in ipairs(artists) do %}
      <li><a href="/artist/{%& artist.artist_id %}">{%& artist.name %}</a></li>
      {% end %}
    </ul>
    {% end %}
    <h1>Tags</h1>
    {% if #tags == 0 then %}
    <p>No tags for this image yet.</p>
    {% else %}
    <ul>
      {% for i = 1, #tags do local tag = tags[i] %}
      <li>
        <a href="/tag/{%& tag.tag_id %}">{%& tag.name %}</a
        ><span class="count">{%& tag.count %}</span>
      </li>
      {% end %}
    </ul>
    {% end %}
    <h1>Sources</h1>
    {% if #sources == 0 then %}
    <p>No sources for this image yet.</p>
    {% else %}
    <ul>
      {% for _, source in ipairs(sources) do %}
      <li>
        <a href="{%& source.link %}">{%& ParseUrl(source.link).host %}</a>
      </li>
      {% end %}
    </ul>
    {% end %}
    <h1>Sharing</h1>
    <form method="POST">
      <span class="buttons">
        <select name="share_option">
          {% for i = 1, #share_ping_lists do local spl = share_ping_lists[i] %}
          <option>{%& spl.spl_id %}: {%& spl.name %}</option>
          {% end %}
        </select>
        <input type="submit" name="share" value="Shareâ€¦" />
      </span>
    </form>
  </div>
</div>
{% end %}{% render("layouts/main", { title = "Image " ..
tostring(image.image_id), user = user }) %}
